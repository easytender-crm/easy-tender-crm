<!DOCTYPE html>
<html>
<head>
<title>Easy Tender CRM (Final Working)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f6ff;}
.header{background:#0066ff;color:#fff;padding:15px;font-size:20px;font-weight:bold;}
.container{padding:20px;}
.card{background:#fff;padding:15px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);margin-bottom:20px;}
input{width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:10px;}
button{padding:10px 20px;background:#0066ff;color:#fff;border:none;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<div class="header">Easy Tender CRM â€“ Add New Client</div>

<div class="container">
    <div class="card">
        <h3>Add New Client</h3>

        <input id="company" placeholder="Company Name">
        <input id="name" placeholder="Client Name">
        <input id="mobile" placeholder="Mobile Number">
        <input id="city" placeholder="City">
        <input id="state" placeholder="State">

        <button onclick="saveClient()">Add Client</button>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { 
  getFirestore, collection, addDoc, serverTimestamp 
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyD9HvxCQD9LoUMpdH6Ne6Ujna5wKFx75aM",
  authDomain: "easy-tender-crm.firebaseapp.com",
  projectId: "easy-tender-crm",
  storageBucket: "easy-tender-crm.firebasestorage.app",
  messagingSenderId: "405693483846",
  appId: "1:405693483846:web:5e38afb1fdf40da7baf347"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.saveClient = async function() {
    const c = document.getElementById('company').value.trim();
    const n = document.getElementById('name').value.trim();
    const m = document.getElementById('mobile').value.trim();
    const city = document.getElementById('city').value.trim();
    const st = document.getElementById('state').value.trim();

    if(!c || !n || !m){ 
        alert("Enter Company, Client Name & Mobile Number");
        return;
    }

    await addDoc(collection(db,'clients'),{
        company:c,
        name:n,
        mobile:m,
        city:city,
        state:st,
        status:"fresh",
        history:[],
        createdAt:serverTimestamp()
    });

    alert("Client Added Successfully!");

    document.getElementById('company').value="";
    document.getElementById('name').value="";
    document.getElementById('mobile').value="";
    document.getElementById('city').value="";
    document.getElementById('state').value="";
}
</script>

</body>
</html>
